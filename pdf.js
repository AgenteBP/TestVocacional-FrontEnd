const carrerLC = 'Estimación: Licenciatura en Ciencia de la Computación';
const dataLC = [
    ['Lo que debes saber acerca de la carrera:'],
    [
        'Programación',
        'Horario de cursada',
        'Salida laboral',
        'Etapa Final',
        'Exigencia'
    ],
    [
        'Veras lenguajes y herramientas que te permitan comprender, mantener y solucionar problemas en el área de investigación como por ejemplo:',
        '- Java',
        '- C, C++',
        '- Prolog',
        '- Bases de datos como MySql, postgresql',
        '- Programación funcional como Haskell',
        '- Assembly',
        '- Arena Simulation para simulación',
        '- Cisco packet tracer'
    ],
    ['Generalmente los horarios de la materia están divididos entre mañana, tarde y noche'],
    [
        'Ámbito de investigación',
        'Áreas informáticas de organizaciones',
        'Formar parte de un equipo de desarrollo de Software',
        'Enseñanzas Universitaria y capacitación en ciencias de la computación'
    ],
    ['Trabajo Final', 'Práctica de Investigación Supervisada']
];

const carrerTW = 'Estimación: Tecnicatura Web';
const dataTW = [
    ['Lo que debes saber acerca de la carrera:', '', '', '', '', ''],
    [
        '',
        'Programación',
        'Horario de cursada',
        'Salida laboral',
        'Etapa Final',
        'Exigencia'
    ],
    [
        'Lo que debes saber acerca de la carrera:',
        'Veras más orientado al alto Nivel como por ejemplo:\n- HTML\n- CSS\n- JavaScript\n- Frameworks y Bibliotecas como React\n- Bases de datos\n- Git y GitHub',
        'Generalmente son en la tarde y la noche',
        'Desarrollador de Software Web y de aplicaciones móviles\nDar asesoramiento técnico\nBrindar seguridad en Web',
        'Práctica Técnica Supervisada',
        'Dedicación parcial (no es exigente)'
    ]
];

const carrerTR = 'Estimación: Tecnicatura Universitaria en Redes de Computadoras';
const dataTR = [
    ['Lo que debes saber acerca de la carrera:', '', '', '', '', ''],
    [
        '',
        'Programación',
        'Horario de cursada',
        'Salida laboral',
        'Etapa Final',
        'Exigencia'
    ],
    [
        'Lo que debes saber acerca de la carrera:',
        'Veras más lenguajes y herramientas que te permitan comprender, mantener y solucionar problemas en entornos de redes en tareas de redes como por ejemplo:\n- Python\n- Java\n- Sistemas Operativos de Redes\n- Bash scripting\n- Wireshark\n- GNS3 (Graphical Network Simulator-3)\n- Cisco packet tracer',
        'Generalmente son en la tarde y la noche',
        '- Asesoramiento técnico\n- Mantenimiento de redes\n- Desarrollar dispositivos de redes\n- Diseño, instalación y configuración de redes de computadora',
        'Práctica Técnica Supervisada',
        'Dedicación parcial (no es exigente)'
    ]
];

const carrerPC = 'Estimación: Profesorado en Ciencias de la Computación';
const dataPC = [
    ['Lo que debes saber acerca de la carrera:', '', '', '', '', ''],
    [
        '',
        'Programación',
        'Horario de cursada',
        'Salida laboral',
        'Etapa Final',
        'Exigencia'
    ],
    [
        'Lo que debes saber acerca de la carrera:',
        'Veras lenguajes y herramientas que te permitan comprender, mantener y solucionar problemas en el área educativa como por ejemplo:\n- Java\n- C, C++\n- Prolog\n- Bases de datos como MySql, postgresql\n- Programación funcional como Haskell\n- Assembly\n- Software educativo como App Inventor',
        'Generalmente los horarios de la materia están divididos entre mañana, tarde y noche',
        '- Poder ejercer la docencia en informática en todos los niveles.\n- Realizar investigación con fines educativos.\n- Asesoría y consultoría a empresas, instituciones educativas o gubernamentales.\n- Desarrollo de Software Educativo.',
        'Actividades acreditables en docencia\nActividades acreditables en extensión\nActividades acreditables en investigación',
        'Dedicación completa (exigente)'
    ]
];

const carrerII = 'Estimación: Ingeniería en Informática';
const dataII = [
    ['Lo que debes saber acerca de la carrera:', '', '', '', '', ''],
    [
        '',
        'Programación',
        'Horario de cursada',
        'Salida laboral',
        'Etapa Final',
        'Exigencia'
    ],
    [
        'Lo que debes saber acerca de la carrera:',
        'Veras más lenguajes y herramientas que te permitan comprender, mantener y solucionar problemas en entornos de la industria del software como por ejemplo:\n- Python\n- Java\n- C, C++\n- Prolog\n- HTML\n- CSS\n- Javascript\n- Frameworks y Bibliotecas como React, CodeIgniter, etc\n- Bases de datos como MySql, postgresql\n- Programación funcional como Haskell',
        'Generalmente los horarios de la materia están divididos entre mañana, tarde y noche',
        '- Desarrollar, gestionar o controlar Proyectos de Software teniendo en cuenta el costo y tiempo.\n- Aplicar la ciencia y la tecnología para mejorar productos de software ya existentes\n- Seguridad Informática en Software\n- Participar en asuntos legales, económicos y financieros en el área de software',
        'Trabajo Final\nPráctica Profesional Supervisada',
        'Dedicación completa (exigente)'
    ]
];

const carrerIC = 'Estimación: Ingeniería en Computación';
const dataIC = [
    ['Lo que debes saber acerca de la carrera:'],
    [
        'Programación',
        'Horario de cursada',
        'Salida laboral',
        'Etapa Final',
        'Exigencia'
    ],
    [
        'Veras más lenguajes y herramientas que te permitan comprender, mantener y solucionar problemas, como por ejemplo:',
        '- Python',
        '- Java',
        '- C, C++',
        '- Assembly',
        '- Sistemas Operativos de Redes',
        '- Bash scripting',
        '- Wireshark',
        '- GNS3 (Graphical Network Simulator-3)',
        '- Cisco packet tracer',
        '- Bases de datos como MySql, postgresql',
        '- Programación funcional como Haskell'
    ],
    ['Generalmente los horarios de la materia están divididos entre mañana, tarde y noche'],
    ['- Desarrollar, gestionar o controlar arquitectura de computadoras, componentes electrónicos, la gestión de redes y comunicaciones, señales digitales. Teniendo en cuenta el costo y tiempo.'],
    ['- Aplicar la ciencia de la tecnología en mejorar productos de hardware y software ya existentes.'],
    ['- Seguridad Informática en productos de hardware y software'],
    ['- Participar en asuntos legales, económicos y financieros en el área.'],
    ['Trabajo Final', 'Práctica Profesional Supervisada'],
    ['Dedicación completa (exigente)']
];
const pdf = new jsPDF('p','pt', 'a4');
// var margin = 20;
// scale = (pdf.internal.pageSize.width - margin * 2) / document.body.clientWidth;
var margin = 25;
var scale = (pdf.internal.pageSize.width - (margin * 2)) / document.body.clientWidth;

function buildPDF(typeofPDF){
    
    var data = null;

    // // Agrega el título al PDF
    // pdf.setFontSize(18);

    switch(typeofPDF){
        case 1: 
            pdf.text(carrerTW, 10, 10);
            data = document.getElementById('tableTW');
            break;
        case 2:
            pdf.text(carrerTR, 10, 10);
            data = document.getElementById('tableTR');
            break;
        case 3:
            pdf.text(carrerPC, 10, 10);
            data = document.getElementById('tablePC');
            break;
        case 4:
            pdf.text(carrerLC, 10, 10);
            data = document.getElementById('tableLC');
            break;
        case 5:
            pdf.text(carrerII, 10, 10);
            data = document.getElementById('tableII');
            break;
        case 6:
            pdf.text(carrerIC, 10, 10);
            data = document.getElementById('tableIC');
            break;
    }

    // Devuelve el contenido del PDF como una cadena
    return pdf.output('datauristring');
    // return data;

}

function generarPDF(typeofPDF){

    var data = null;

    // // Agrega el título al PDF
    // pdf.setFontSize(18);

    switch(typeofPDF){
        case 1: 
            pdf.text(carrerTW, 10, 10);
            data = document.getElementById('tableTW');
            break;
        case 2:
            pdf.text(carrerTR, 10, 10);
            data = document.getElementById('tableTR');
            break;
        case 3:
            pdf.text(carrerPC, 10, 10);
            data = document.getElementById('tablePC');
            break;
        case 4:
            pdf.text(carrerLC, 15, 20);
            data = document.getElementById('tableLC');
            break;
        case 5:
            pdf.text(carrerII, 10, 10);
            data = document.getElementById('tableII');
            break;
        case 6:
            pdf.text(carrerIC, 10, 10);
            data = document.getElementById('tableIC');
            break;
    }

    pdf.html(
        data, 
        {
          x: margin, 
          y: margin, 
          html2canvas:{
            scale: scale, 
        },
        callback: function(pdf){ 
            pdf.output('dataurlnewwindow', 'carrera_informacion.pdf'); 
        }
     });

    // Guarda o muestra el PDF
    // pdf.save('carrera_informacion.pdf');
    
}

function sendEmail(typeofPDF, destinatario) {
    var data = null;
    console.log("el destinatario es ", destinatario);

    switch (typeofPDF) {
        case 1:
            pdf.text(carrerTW, 10, 10);
            data = document.getElementById('tableTW');
            break;
        case 2:
            pdf.text(carrerTR, 10, 10);
            data = document.getElementById('tableTR');
            break;
        case 3:
            pdf.text(carrerPC, 10, 10);
            data = document.getElementById('tablePC');
            break;
        case 4:
            pdf.text(carrerLC, 10, 10);
            data = document.getElementById('tableLC');
            break;
        case 5:
            pdf.text(carrerII, 10, 10);
            data = document.getElementById('tableII');
            break;
        case 6:
            pdf.text(carrerIC, 10, 10);
            data = document.getElementById('tableIC');
            break;
    }

    pdf.html(data, {
        x: margin,
        y: margin,
        html2canvas: {
            scale: scale,
        },
        callback: function (pdf) {
            // Convertir el PDF en un Blob
            var blob = new Blob([pdf.output('arraybuffer')], { type: 'application/pdf' });

            // Crear el objeto FormData y agregar el PDF y el destinatario
            var formData = new FormData();
            formData.append('pdf', blob, 'carrera_informacion.pdf');
            formData.append('destinatario', destinatario);

            // Enviar la solicitud POST al backend
            fetch('http://localhost:8081/sendEmail/enviar', {
                method: 'POST',
                body: formData
            })
                // .then(response => {
                //     if (!response.ok) {
                //         throw new Error('Error al enviar el PDF al servidor');
                //     }
                //     alert('PDF enviado al servidor correctamente');
                // })
            .catch(error => {
                console.error('Error:', error);
                alert('Hubo un error al enviar el PDF al servidor');
            });
        }
    });
}

// .then(response => {
//     console.log('Estado de la respuesta:', response.status);
//     console.log('Cabeceras de la respuesta:', response.headers);

//     if (!response.ok) {
//         throw new Error('Error en la respuesta del servidor: ' + response.status);
//     }

//     // Verifica si la respuesta tiene un tipo de contenido adecuado
//     const contentType = response.headers.get('content-type');
//     console.log('Tipo de contenido de la respuesta:', contentType);

//     if (contentType && contentType.includes('application/json')) {
//         return response.json();  // Analiza la respuesta como JSON
//     } else {
//         return response.text();
//     }
// })
// .then(data => {
//     console.log('Respuesta del servidor:', data);
//     console.log('Respuesta del status:', data.status);

//     // Verifica si la respuesta indica que el mensaje fue enviado exitosamente
//     // if (data.status === 200) {
//         // Muestra un mensaje de alerta indicando que el mensaje fue enviado
//         // alert('Mensaje enviado exitosamente, presione aceptar para volver hacer el test');
//         // reloadPage();
//     // } else {
//     //     // Muestra un mensaje de alerta indicando que hubo un problema al enviar el mensaje
//     //     alert('Error al enviar el mensaje');
//     // }
    
// })
// .catch(error => {
//     console.error('Error al enviar el correo electrónico:', error);
// });

